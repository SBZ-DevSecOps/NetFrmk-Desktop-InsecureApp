<Window x:Class="NetFrmk_Desktop_InsecureApp.DA07UnsafeApiWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:NetFrmk_Desktop_InsecureApp"
        mc:Ignorable="d"
        Title="DA07 – Poor Code Quality / Unsafe APIs" 
        Height="800" Width="1220" Background="#F7F9FA">
    <ScrollViewer>
        <StackPanel Margin="18">
            <TextBlock Name="TitleText" FontWeight="Bold" FontSize="24"
                       Foreground="{DynamicResource DA07Panel1}" Margin="0,0,0,18"/>
            <TextBlock Name="IntroText" FontSize="14"
                       Foreground="{DynamicResource DA07Panel2}" Margin="0,0,0,20"/>
            <ComboBox Name="LanguageSelector" Width="200" SelectionChanged="LanguageSelector_Changed" Margin="0,0,0,22">
                <ComboBoxItem Content="English"/>
                <ComboBoxItem Content="Français"/>
            </ComboBox>
            <UniformGrid Columns="3" HorizontalAlignment="Center">

                <!-- 1. Unsafe Buffer -->
                <Border CornerRadius="10" BorderThickness="2"
                        BorderBrush="{DynamicResource DA07Panel1}" Background="{DynamicResource DA07Panel7}" Margin="8">
                    <StackPanel Margin="14">
                        <TextBlock Name="UnsafeBufferLabel" FontWeight="Bold" FontSize="16" Foreground="{DynamicResource DA07Panel1}"/>
                        <TextBlock Name="UnsafeBufferDesc" FontSize="12" Margin="0,3"/>
                        <TextBox Name="UnsafeBufferInput" Width="310" Margin="0,10,0,4" Text="ABCDEFGH"/>
                        <Button Name="UnsafeBufferButton"
                                Background="{DynamicResource DA07Panel1}" Foreground="White"
                                Click="UnsafeBufferButton_Click" Padding="8,2" Width="160"/>
                        <TextBlock Name="UnsafeBufferResult" Margin="0,8,0,0" Foreground="{DynamicResource DA07Panel1}" FontWeight="Bold"/>
                    </StackPanel>
                </Border>

                <!-- 2. BinaryFormatter -->
                <Border CornerRadius="10" BorderThickness="2"
                        BorderBrush="{DynamicResource DA07Panel2}" Background="{DynamicResource DA07Panel6}" Margin="8">
                    <StackPanel Margin="14">
                        <TextBlock Name="BinaryFormatterLabel" FontWeight="Bold" FontSize="16" Foreground="{DynamicResource DA07Panel2}"/>
                        <TextBlock Name="BinaryFormatterDesc" FontSize="12" Margin="0,3"/>
                        <TextBox Name="BinaryFormatterInput" Width="310" Margin="0,10,0,4"
                                 Text="AAEAAAD/////AQAAAAAAAAAEAQAAAG1TeXN0ZW0uSW50MzIsIFZlcnNpb249Mi4wLjAsIEN1bHR1cmU9bmV1dHJhbCwgUHVibGljS2V5VG9rZW49bnVsbAAAAAUCAAAABkFwcERhdGEFAAAAAQAAAA=="/>
                        <Button Name="BinaryFormatterButton"
                                Background="{DynamicResource DA07Panel2}" Foreground="White"
                                Click="BinaryFormatterButton_Click" Padding="8,2" Width="120"/>
                        <TextBlock Name="BinaryFormatterResult" Margin="0,8,0,0" Foreground="{DynamicResource DA07Panel2}" FontWeight="Bold"/>
                    </StackPanel>
                </Border>

                <!-- 3. Integer Overflow -->
                <Border CornerRadius="10" BorderThickness="2"
                        BorderBrush="{DynamicResource DA07Panel3}" Background="{DynamicResource DA07Panel5}" Margin="8">
                    <StackPanel Margin="14">
                        <TextBlock Name="IntOverflowLabel" FontWeight="Bold" FontSize="16" Foreground="{DynamicResource DA07Panel3}"/>
                        <TextBlock Name="IntOverflowDesc" FontSize="12" Margin="0,3"/>
                        <TextBox Name="IntOverflowInput" Width="210" Margin="0,10,0,4" Text="2147483647"/>
                        <Button Name="IntOverflowButton" Content="Test Overflow"
                                Background="{DynamicResource DA07Panel3}" Foreground="#212121"
                                Click="IntOverflowButton_Click" Padding="8,2" Width="110"/>
                        <TextBlock Name="IntOverflowResult" Margin="0,8,0,0" Foreground="{DynamicResource DA07Panel3}" FontWeight="Bold"/>
                    </StackPanel>
                </Border>

                <!-- 4. Unsafe P/Invoke -->
                <Border CornerRadius="10" BorderThickness="2"
                        BorderBrush="{DynamicResource DA07Panel4}" Background="{DynamicResource DA07Panel4}" Margin="8">
                    <StackPanel Margin="14">
                        <TextBlock Name="PInvokeLabel" FontWeight="Bold" FontSize="16" Foreground="{DynamicResource DA07Panel1}"/>
                        <TextBlock Name="PInvokeDesc" FontSize="12" Margin="0,3"/>
                        <TextBox Name="PInvokeInput" Width="210" Margin="0,10,0,4" Text="MessageBox"/>
                        <Button Name="PInvokeButton"
                                Background="{DynamicResource DA07Panel1}" Foreground="White"
                                Click="PInvokeButton_Click" Padding="8,2" Width="90"/>
                        <TextBlock Name="PInvokeResult" Margin="0,8,0,0" Foreground="{DynamicResource DA07Panel1}" FontWeight="Bold"/>
                    </StackPanel>
                </Border>

                <!-- 5. Eval / Dynamic code execution -->
                <Border CornerRadius="10" BorderThickness="2"
                        BorderBrush="{DynamicResource DA07Panel5}" Background="{DynamicResource DA07Panel3}" Margin="8">
                    <StackPanel Margin="14">
                        <TextBlock Name="EvalLabel" FontWeight="Bold" FontSize="16" Foreground="{DynamicResource DA07Panel5}"/>
                        <TextBlock Name="EvalDesc" FontSize="12" Margin="0,3"/>
                        <TextBox Name="EvalInput" Width="210" Margin="0,10,0,4" Text="1+2"/>
                        <Button Name="EvalButton"
                                Background="{DynamicResource DA07Panel5}" Foreground="#212121"
                                Click="EvalButton_Click" Padding="8,2" Width="70"/>
                        <TextBlock Name="EvalResult" Margin="0,8,0,0" Foreground="{DynamicResource DA07Panel5}" FontWeight="Bold"/>
                    </StackPanel>
                </Border>

                <!-- 6. Race Condition (File Write) -->
                <Border CornerRadius="10" BorderThickness="2"
                        BorderBrush="{DynamicResource DA07Panel6}" Background="{DynamicResource DA07Panel2}" Margin="8">
                    <StackPanel Margin="14">
                        <TextBlock Name="RaceLabel" FontWeight="Bold" FontSize="16" Foreground="{DynamicResource DA07Panel6}"/>
                        <TextBlock Name="RaceDesc" FontSize="12" Margin="0,3"/>
                        <TextBox Name="RaceInput" Width="310" Margin="0,10,0,4" Text="C:\Temp\race.txt"/>
                        <Button Name="RaceButton"
                                Background="{DynamicResource DA07Panel6}" Foreground="#212121"
                                Click="RaceButton_Click" Padding="8,2" Width="120"/>
                        <TextBlock Name="RaceResult" Margin="0,8,0,0" Foreground="{DynamicResource DA07Panel6}" FontWeight="Bold"/>
                    </StackPanel>
                </Border>

                <!-- 7. Stack Overflow (Unbounded Recursion) -->
                <Border CornerRadius="10" BorderThickness="2"
                        BorderBrush="{DynamicResource DA07Panel7}" Background="{DynamicResource DA07Panel1}" Margin="8">
                    <StackPanel Margin="14">
                        <TextBlock Name="StackLabel" FontWeight="Bold" FontSize="16" Foreground="{DynamicResource DA07Panel7}"/>
                        <TextBlock Name="StackDesc" FontSize="12" Margin="0,3"/>
                        <TextBox Name="StackInput" Width="70" Margin="0,10,0,4" Text="100"/>
                        <Button Name="StackButton"
                                Background="{DynamicResource DA07Panel7}" Foreground="#212121"
                                Click="StackButton_Click" Padding="8,2" Width="160"/>
                        <TextBlock Name="StackResult" Margin="0,8,0,0" Foreground="{DynamicResource DA07Panel7}" FontWeight="Bold"/>
                    </StackPanel>
                </Border>

            </UniformGrid>
        </StackPanel>
    </ScrollViewer>
</Window>
